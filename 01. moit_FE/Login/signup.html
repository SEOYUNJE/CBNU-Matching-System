<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="signup.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
      /* ë²„íŠ¼ disabled ìŠ¤íƒ€ì¼ */
      .btn-signup:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      /* ì—ëŸ¬ ë©”ì‹œì§€ ê¸°ë³¸ ìˆ¨ê¹€ */
      #pw-error {
        display: none;
        font-size: 0.8rem;
        margin-top: 0.5rem;
      }
    </style>
</head>
<body>
  <header class="header">
    <div class="logo">moit</div>
    <nav class="nav">
      <a href="#">meals</a>
      <a href="#">study</a>
      <a href="#">game</a>
      <a href="#">exercise</a>
    </nav>
    <div class="util">ğŸ” ğŸ‘¤</div>
  </header>

  <main>
    <div class="signup-container">
      <h1 class="title">Sign up</h1>

      <form id="signup-form" novalidate>
        <!-- ì•„ì´ë”” -->
        <div class="field">
          <label for="user-id">ì•„ì´ë””</label>
          <div class="inline-group">
            <input
              id="user-id"
              type="text"
              placeholder="ì•„ì´ë”” ì…ë ¥"
              required />
            <button type="button" class="btn-check">ì¤‘ë³µí™•ì¸</button>
          </div>
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ -->
        <div class="field">
          <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
          <input
            id="password"
            type="password"
            oninput="pwCheck()"
            placeholder="ëŒ€ë¬¸ì+ìˆ«ì+íŠ¹ìˆ˜ë¬¸ì ì¡°í•©"
            required />
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
        <div class="field">
          <label for="password-confirm">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
          <input
            id="password-confirm"
            type="password"
            oninput="pwCheck()"
            placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥"
            required />
          <p class="error-message" id="pw-error">ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        </div>

        <!-- ì´ë©”ì¼ -->
        <div class="field">
          <label for="email">ì´ë©”ì¼</label>
          <input
            id="email"
            type="email"
            placeholder="ì´ë©”ì¼ ì…ë ¥"
            required />
        </div>

        <!-- ê°€ì… ë²„íŠ¼ -->
        <button type="submit" class="btn-signup" disabled>íšŒì›ê°€ì…</button>
      </form>
    </div>
  </main>

  <footer>
    <!-- footer ë‚´ìš© -->
  </footer>

  <!-- validation & password-check ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
  $(function(){
    // ë³€ìˆ˜ ì„ ì–¸
    const $idField  = $('#user-id');
    const $p1       = $('#password');
    const $p2       = $('#password-confirm');
    const $email    = $('#email');
    const $msg      = $('#pw-error');
    const $submit   = $('.btn-signup');

    const reg = /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,25}$/;

    // ì „ì²´ í¼ ê²€ì¦ í•¨ìˆ˜
    function validateForm(){
      const idVal    = $idField.val().trim();
      const p1Val    = $p1.val();
      const p2Val    = $p2.val();
      const emailVal = $email.val().trim();

      // 1) ë„¤ í•„ë“œ ì¤‘ í•˜ë‚˜ë¼ë„ ë¹„ì–´ ìˆìœ¼ë©´
      if (!idVal || !p1Val || !p2Val || !emailVal) {
        $msg.hide();
        $submit.prop('disabled', true);
        return;
      }

        if (!reg.test(p1Val)) {
      $msg
        .text('ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸ìì™€ ìˆ«ìë¥¼ í¬í•¨í•œ 8~25ìì—¬ì•¼ í•©ë‹ˆë‹¤.')
        .css({ color: 'orange', display: 'block' });
      $submit.prop('disabled', true);
      return;
    }

      // 2) ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ ì‹œ
      if (p1Val !== p2Val) {
        $msg
          .text('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')
          .css({ color: 'red', display: 'block' });
        $submit.prop('disabled', true);
        return;
      }

      // 3) ëª¨ë‘ ì±„ì›Œì¡Œê³  ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜ ì‹œ
      $msg.hide();
      $submit.prop('disabled', false);
    }

    // pwCheck()ëŠ”(validateFormê³¼ ë™ì¼) inline oninputì„ ìœ„í•´ ë‚¨ê²¨ë‘ 
    window.pwCheck = validateForm;

    // ì´ë²¤íŠ¸ ë°”ì¸ë”©: ëª¨ë“  í•„ë“œ ë³€í™” ì‹œ ê²€ì¦
    $idField
      .add($p1)
      .add($p2)
      .add($email)
      .on('input', validateForm);

    // ì´ˆê¸° ê²€ì¦
    validateForm();

    // ì œì¶œ ì•ˆì „ì¥ì¹˜
    $('#signup-form').on('submit', function(e){
      if ($submit.prop('disabled')) {
        e.preventDefault();
      }
    });
  });

   // í¼ ì œì¶œ ì‹œ ì‹¤ì œ ì´ë™ ë°±ì—”ë“œë‘ í•©ì¹˜ë©´ ì§€ìš°ê¸°(í”„ë¡ íŠ¸ì—ì„œ ì´ë™í• ë ¤ê³  êµ¬í˜„í•œê²ƒ)
  $('#signup-form').on('submit', function(e){
    e.preventDefault();
    // TODO: ì‹¤ì œ íšŒì›ê°€ì… API í˜¸ì¶œ í›„
    // location.replace('/profile.html');
    window.location.href = 'profile.html';
  });
  </script>
</body>
</html>
