<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="signup.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
      /* ë²„íŠ¼ disabled ìŠ¤íƒ€ì¼ */
      .btn-signup:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      /* ì—ëŸ¬ ë©”ì‹œì§€ ê¸°ë³¸ ìˆ¨ê¹€ */
      #pw-error {
        display: none;
        font-size: 0.8rem;
        margin-top: 0.5rem;
      }
    </style>
</head>
<body>
  <header class="header">
    <div class="logo">moit</div>
    <nav class="nav">
      <a href="#">meals</a>
      <a href="#">study</a>
      <a href="#">game</a>
      <a href="#">exercise</a>
    </nav>
    <div class="util">ğŸ” ğŸ‘¤</div>
  </header>

  <main>
    <div class="signup-container">
      <h1 class="title">íšŒì›ê°€ì…</h1>

      <form id="signup-form" novalidate>
        <!-- ì•„ì´ë”” -->
        <div class="field">
          <label for="user-id">ì•„ì´ë””</label>
          <div class="inline-group">
            <input
              id="user-id"
              type="text"
              placeholder="ì•„ì´ë”” ì…ë ¥"
              required />
            <button type="button" class="btn-check">ì¤‘ë³µí™•ì¸</button>
          </div>
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ -->
        <div class="field">
          <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
          <input
            id="password"
            type="password"
            oninput="validateForm()"
            placeholder="ì˜ë¬¸,ìˆ«ì 8~25ì ì¡°í•©"
            required />
          <p class="error-message" id="pw-pattern-error">ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸ìì™€ ìˆ«ìë¥¼ í¬í•¨í•œ 8~25ìì—¬ì•¼ í•©ë‹ˆë‹¤.</p> 
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
        <div class="field">
          <label for="password-confirm">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
          <input
            id="password-confirm"
            type="password"
            oninput="validateForm()"
            placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥"
            required />
          <p class="error-message" id="pw-match-error">ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        </div>

         <!-- ì„± â€¢ ì´ë¦„ í•„ë“œ (2ì—´ ê·¸ë¦¬ë“œ) -->
        <div class="field name-fields">
          <div class="field-group">
            <label for="last-name">ì„±</label>
            <input id="last-name"
                   type="text"
                   placeholder="ì„± ì…ë ¥"
                   required>
          </div>
          <div class="field-group">
            <label for="first-name">ì´ë¦„</label>
            <input id="first-name"
                   type="text"
                   placeholder="ì´ë¦„ ì…ë ¥"
                   required>
          </div>
        </div>

        <!-- ì´ë©”ì¼ -->
        <div class="field">
          <label for="email">ì´ë©”ì¼</label>
          <input
            id="email"
            type="email"
            placeholder="ì´ë©”ì¼ ì…ë ¥"
            required />
        </div>

        <!-- ê°€ì… ë²„íŠ¼ -->
        <button type="submit" class="btn-signup" disabled>ê°€ì…í•˜ê¸°</button>
      </form>
    </div>
  </main>

  <footer>
    <!-- footer ë‚´ìš© -->
  </footer>

  <!-- validation & password-check ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
$(function(){
  // ë³€ìˆ˜ ì„ ì–¸
  const $idField      = $('#user-id');
  const $p1           = $('#password');
  const $p2           = $('#password-confirm');
  const $lastname     = $('#last-name');
  const $firstname    = $('#first-name');
  const $email        = $('#email');
  const $patternError = $('#pw-pattern-error');  // íŒ¨í„´ ì—ëŸ¬ ë©”ì‹œì§€
  const $matchError   = $('#pw-match-error');    // ì¼ì¹˜ ì—ëŸ¬ ë©”ì‹œì§€
  const $submit       = $('.btn-signup');

  // ì˜ë¬¸+ìˆ«ì ì¡°í•©, 8~25ì
  const reg = /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,25}$/;

  function validateForm(){
    const idVal    = $idField.val().trim();
    const p1Val    = $p1.val();
    const p2Val    = $p2.val();
    const LnameVal = $lastname.val().trim();
    const FnameVal = $firstname.val().trim();
    const emailVal = $email.val().trim();

    // 1) ë¹„ë°€ë²ˆí˜¸ íŒ¨í„´ ê²€ì‚¬
    if (p1Val && !reg.test(p1Val)) {
      $patternError
        .text('ë¹„ë°€ë²ˆí˜¸ëŠ” ì˜ë¬¸ìì™€ ìˆ«ìë¥¼ í¬í•¨í•œ 8~25ìì—¬ì•¼ í•©ë‹ˆë‹¤.')
        .css({ color: 'orange', display: 'block' });
      $matchError.hide();
      $submit.prop('disabled', true);
      return;
    } else {
      $patternError.hide();
    }

    // 2) ë¹„ë°€ë²ˆí˜¸ í™•ì¸ ì¼ì¹˜ ê²€ì‚¬
    if (p2Val && p1Val !== p2Val) {
      $matchError
        .text('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')
        .css({ color: 'red', display: 'block' });
      $submit.prop('disabled', true);
      return;
    } else {
      $matchError.hide();
    }

    // 3) ë‚˜ë¨¸ì§€ í•„ë“œ ë¹ˆê°’ ì²´í¬
    if (!idVal || !p1Val || !p2Val || !LnameVal || !FnameVal || !emailVal) {
      $submit.prop('disabled', true);
      return;
    }

    // 4) í†µê³¼ ì‹œ í™œì„±í™”
    $submit.prop('disabled', false);
  }

  // ì´ë²¤íŠ¸ ë°”ì¸ë”©
  window.pwCheck = validateForm;  // inline oninput ìš©
  $idField
    .add($p1)
    .add($p2)
    .add($lastname)
    .add($firstname)
    .add($email)
    .on('input', validateForm);

  // ì´ˆê¸° ê²€ì¦
  validateForm();

  // ì œì¶œ ë°©ì§€
  $('#signup-form').on('submit', function(e){
    if ($submit.prop('disabled')) e.preventDefault();
  });
});

// ì„ì‹œ í”„ë¡ íŠ¸ë‚´ ì´ë™
$('#signup-form').on('submit', function(e){
  e.preventDefault();
  window.location.href = 'profile.html';
});
</script>
</body>
</html>
