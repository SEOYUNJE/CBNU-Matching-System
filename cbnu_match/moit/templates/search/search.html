
<!-- cbnu_match/moit/templates/search/search.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ëª¨ì„ ê²€ìƒ‰</title>
  <style>
    .filter-box { margin-bottom: 20px; }
    .search-input { width: 300px; padding: 5px; }
    .select-box { padding: 5px; margin-right: 10px; }
    .meet-card { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h1>ğŸ” ëª¨ì„ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸</h1>

  <form method="get">
    <div class="filter-box">
      <input type="text" name="query" class="search-input" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" value="{{ query }}">

      <select name="main_type" class="select-box" onchange="this.form.submit()">
        <option value="">-- ëŒ€ì£¼ì œ ì„ íƒ --</option>
        <option value="created" {% if main_type == 'created' %}selected{% endif %}>ë§Œë“  ë‚ ì§œ</option>
        <option value="participant" {% if main_type == 'participant' %}selected{% endif %}>ì¸ì›ìˆ˜</option>
        <option value="category" {% if main_type == 'category' %}selected{% endif %}>ì¹´í…Œê³ ë¦¬</option>
        <option value="all" {% if main_type == 'all' %}selected{% endif %}>ì „ì²´</option>
      </select>

      <select name="sub_type" class="select-box">
        {% for value, label in form.fields.sub_type.choices %}
          <option value="{{ value }}" {% if value == sub_type %}selected{% endif %}>{{ label }}</option>
        {% endfor %}
      </select>

      <button type="submit">ğŸ” ê²€ìƒ‰</button>
    </div>
  </form>

  <hr>

  <div>
    {% if results %}
      <h3>ê²€ìƒ‰ ê²°ê³¼ (ì´ {{ results.paginator.count }}ê°œ):</h3>
      {% for meet in results %}
        <div class="meet-card">
          <strong>{{ meet.title }}</strong><br>
          ì¹´í…Œê³ ë¦¬: {{ meet.category }}<br>
          ì°¸ê°€ì ìˆ˜: {{ meet.num_participants }}ëª…<br>
          ìƒì„±ì¼: {{ meet.created_at|date:"Y-m-d H:i" }}<br>
        </div>
      {% endfor %}
    {% else %}
      <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </div>

  <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
  <div>
    {% if results.has_previous %}
      <a href="?page={{ results.previous_page_number }}&query={{ query }}&main_type={{ main_type }}&sub_type={{ sub_type }}">ì´ì „</a>
    {% endif %}

    <span>í˜ì´ì§€ {{ results.number }} / {{ results.paginator.num_pages }}</span>

    {% if results.has_next %}
      <a href="?page={{ results.next_page_number }}&query={{ query }}&main_type={{ main_type }}&sub_type={{ sub_type }}">ë‹¤ìŒ</a>
    {% endif %}
  </div>
</body>
</html>